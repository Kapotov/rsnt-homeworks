# Домашнее задание к занятию  "Протоколы связующего дерева"

### Цель задания

Отказоустойчивость - это то, без чего не может существовать современная сеть. Один из способов повышения отказоустойчивости сети - резервирование физических линков. Но канальный уровень не имеет защиты от петли коммутации и не умеет выбирать лучший путь для фреймов до получателя. Эти проблемы решает STP. Важно понимать, как работает протокол и его термины.  

В результате выполнения этого задания вы:
1) Научитесь определять участников алгоритма STP.
2) Научитесь определять, какие порты заблокированы, какие пропускают трафик в случае резервирования физических связей на уровне L2.
3) Научитесь применять алгоритм STP в случае RSTP.  

### Инструкция к выполнению домашнего задания

1. Сделайте копию [Шаблона для домашнего задания](https://docs.google.com/document/d/1youKpKm_JrC0UzDyUslIZW2E2bIv5OVlm_TQDvH5Pvs/edit) себе на Google Disk.
2. В названии файла введите корректное название лекции и вашу фамилию и имя.
3. Зайдите в “Настройки доступа” и выберите доступ “Просматривать могут все в Интернете, у кого есть ссылка”.
 Ссылка на инструкцию [Как предоставить доступ к файлам и папкам на Google Диске](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop)
5. Скопируйте текст задания в свой документ.
6. Выполните домашнее задание, запишите ответы и приложите необходимые скриншоты в свой Google Doc.
7. Для проверки домашнего задания преподавателем отправьте ссылку на ваш документ в личном кабинете.
8. Любые вопросы по решению задач задавайте в чате учебной группы.

------

### Задание 1.

<img width="1000" alt="STP_рц" src ="https://github.com/netology-code/rsnt-homeworks/blob/main/3-02/picture_hw_3_02.png">



Для  заданной схемы сети определите:
1) Корневой коммутатор
2) Корневые порты
3) Назначенный порты
4) Неназначенные порты 
 
Обоснуйте своё решение.  
В результате необходимо получить древовидную топологию сети во главе с корневым коммутатором. То есть определить, какие порты будут заблокированны, а какие будут пропускать трафик.  

*Приведите ответ в виде картинки со схемой (внесите изменения) или в виде таблицы. Обоснование в свободной форме.*
<img width="693" alt="picture_hw_3_02" src="https://github.com/Kapotov/rsnt-homeworks/assets/123774335/4fc00a52-051a-4a24-bf0b-c3d8fab70b2e">

```
"Корневой коммутатор" - это термин, связанный с технологией Ethernet и протоколом Spanning Tree Protocol (STP).
 STP используется для предотвращения петель в сетях Ethernet и обеспечения безопасности и надежности сети.
 Корневой коммутатор - это коммутатор в сети, который выбран как корневой мост, и он играет центральную роль в определении топологии сети.

Расчет корневого коммутатора в сети происходит следующим образом:

В начале работы STP вся сеть считается единой деревянной топологией с корневым мостом.

Каждый коммутатор в сети отправляет Bridge Protocol Data Units (BPDU) с информацией о себе и стоимости соединения к корневому мосту.

Когда коммутаторы получают BPDUs от соседних коммутаторов, они сравнивают их собственные BPDUs с полученными данными,
 чтобы определить, являются ли они более подходящими для роли корневого моста.

Каждый коммутатор вычисляет свою "приоритетность моста" (Bridge Priority), которая является одним из факторов выбора корневого моста.
Коммутатор с более низкой приоритетностью имеет больше шансов стать корневым мостом.

Если два коммутатора имеют одинаковую приоритетность моста, то выбирается тот с наименьшей идентификатор моста (Bridge ID),
который состоит из приоритетности моста и MAC-адреса коммутатора. Коммутатор с наименьшим Bridge ID становится корневым мостом.

Корневой мост отправляет периодические BPDUs, и все остальные коммутаторы пересчитывают
свои роли в соответствии с информацией, полученной в BPDUs.

Таким образом, корневой коммутатор определяется на основе приоритетности моста, Bridge ID и стоимости соединений в сети,
 и он играет ключевую роль в определении топологии сети и предотвращении петель.
```

---

### Задание 2.

Определите, что нужно изменить в настройках STP, чтобы на схеме из задания 1 изменился корневой коммутатор?  
Как изменится при этом топология?

В результате необходимо получить древовидную топологию сети во главе с корневым коммутатором. То есть определить, какие порты будут заблокированны, а какие будут пропускать трафик.  

*Приведите ответ в виде картинки со схемой (внесите изменения) или в виде таблицы. Обоснование в свободной форме.*

```
Изменить Bridge Priority (приоритет моста): Корневой коммутатор выбирается на основе приоритета моста (Bridge Priority).
 По умолчанию у большинства коммутаторов значение приоритета составляет 32768. Чем ниже значение приоритета, тем выше приоритет устройства.
 Если вы хотите сделать определенный коммутатор корневым, установите для него меньшее значение Bridge Priority, чем у текущего корневого коммутатора.
 Например, можно установить Bridge Priority равным 8192 на желаемом коммутаторе.

Изменить Bridge ID: Bridge ID состоит из Bridge Priority и MAC-адреса коммутатора. Если изменение Bridge Priority не подходит, также можно
изменить MAC-адрес коммутатора. Это может потребовать изменения физической сетевой карты или использование виртуальных средств для изменения MAC-адреса.
```
Я изменил Priority SW2 на 32555, в результате именно он стал Root
<img width="693" alt="picture_hw_3_02 (1)" src="https://github.com/Kapotov/rsnt-homeworks/assets/123774335/dc4fdd64-a4f6-4814-b669-a7b83ad09185">

---

### Задание 3.

Опишите этапы алгоритма RSTP для сети, топология которой изменилась. По аналогии с описанием для STP на слайде № 48 презентации к лекции.

*Приведите ответ в свободной форме.*
```
Протокол RSTP (Rapid Spanning Tree Protocol) - это улучшенная версия протокола STP (Spanning Tree Protocol),
который используется для предотвращения петель в сетях Ethernet. Когда топология сети изменяется, алгоритм RSTP
 применяет несколько этапов для пересчета топологии и обеспечения безопасности сети. Вот основные этапы алгоритма RSTP при изменении топологии:

1. Детектирование изменений: Когда происходит изменение в топологии сети (например, добавление нового устройства или изменение структуры сети),
 коммутаторы начинают процесс обнаружения изменений и начинают обмен BPDUs (Bridge Protocol Data Units) для обновления информации о топологии.

2. Расчет портов переключения: RSTP быстро определяет порты, которые должны быть заблокированы или переведены в состояние пересчета на основе
 обновленной информации о топологии. Это позволяет избежать петель и обеспечить эффективное функционирование сети.

3. Пересчет путей: RSTP быстро пересчитывает пути до корневого коммутатора и обновляет информацию о топологии для всех коммутаторов в сети.
 Это включает в себя определение новых пересчетных путей и блокировку ненужных путей для предотвращения возможных петель.

4. Обновление таблиц MAC-адресов: После пересчета путей RSTP обновляет таблицы MAC-адресов на всех коммутаторах в сети. Это позволяет
 корректно маршрутизировать трафик и предотвращать возможные коллизии и петли в сети.

5. Активация новой топологии: После завершения всех вышеуказанных этапов новая топология сети активируется, и коммутаторы начинают
 пересылать данные в соответствии с обновленной структурой топологии.

Эти этапы позволяют протоколу RSTP быстро адаптироваться к изменениям в топологии сети,
обеспечивая эффективное и безопасное функционирование сети Ethernet.
```

---

### Правила приема домашнего задания

В личном кабинете отправлены:

- ссылка на документ (Google Doc или Google Sheet) с выполненным заданием. В документе настроены права доступа “Просматривать могут все в Интернете, у кого есть ссылка”;
- картинка со схемой с внесенными изменениями.


### Критерии оценки

1. Зачет - выполнены все задания, ответы даны в развернутой форме, приложены соответствующие скриншоты, в выполненных заданиях нет противоречий и нарушения логики.

2. На доработку - задание выполнено частично или не выполнено, в логике выполнения заданий есть противоречия, существенные недостатки, нарушена методология.
